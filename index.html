<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psychological Safety Assessment | Chapman University</title>
    <style>
        :root {
            --chapman-blue: #00205B;
            --chapman-gold: #C4A000;
            --gold-light: #F5E6A3;
            --blue-light: #E8EDF5;
            --blue-medium: #1A3A7A;
            --text-primary: #1a1a2e;
            --text-secondary: #4a4a5a;
            --white: #ffffff;
            --voice: #1565C0;
            --risk: #2E7D32;
            --mistakes: #7B1FA2;
            --inclusion: #C62828;
            --shadow-medium: 0 4px 20px rgba(0, 32, 91, 0.12);
            --shadow-strong: 0 8px 32px rgba(0, 32, 91, 0.18);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', -apple-system, sans-serif; line-height: 1.7; color: var(--text-primary); background: linear-gradient(135deg, var(--chapman-blue), var(--blue-medium)); min-height: 100vh; padding: 20px; }
        .container { max-width: 950px; margin: 0 auto; background: var(--white); border-radius: 16px; box-shadow: var(--shadow-strong); overflow: hidden; }
        .header { background: linear-gradient(135deg, var(--chapman-blue), var(--blue-medium)); color: var(--white); padding: 40px 30px; text-align: center; position: relative; }
        .header::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, var(--chapman-gold), var(--gold-light), var(--chapman-gold)); }
        .institution { font-size: 0.95em; letter-spacing: 2px; text-transform: uppercase; opacity: 0.9; margin-bottom: 5px; }
        .college { font-size: 1.1em; color: var(--chapman-gold); margin-bottom: 20px; font-weight: 600; }
        h1 { font-size: 2.4em; font-weight: 700; margin-bottom: 12px; }
        .subtitle { font-size: 1.15em; font-style: italic; color: var(--gold-light); }
        .content { padding: 35px; }
        .hidden { display: none !important; }
        .intro-section { background: linear-gradient(135deg, var(--blue-light), #f8f9fc); border-radius: 14px; padding: 30px; margin-bottom: 30px; border-left: 5px solid var(--chapman-blue); }
        .intro-section h2 { color: var(--chapman-blue); font-size: 1.4em; margin-bottom: 15px; }
        .intro-section p { color: var(--text-secondary); margin-bottom: 15px; }
        .dimensions-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 25px 0; }
        .dim-preview { padding: 20px 12px; border-radius: 12px; text-align: center; color: var(--white); }
        .dim-preview.voice { background: linear-gradient(135deg, var(--voice), #1976D2); }
        .dim-preview.risk { background: linear-gradient(135deg, var(--risk), #43A047); }
        .dim-preview.mistakes { background: linear-gradient(135deg, var(--mistakes), #9C27B0); }
        .dim-preview.inclusion { background: linear-gradient(135deg, var(--inclusion), #D32F2F); }
        .dim-preview .icon { font-size: 1.8em; margin-bottom: 6px; }
        .dim-preview .name { font-weight: 700; font-size: 0.75em; line-height: 1.3; }
        .quote-box { background: linear-gradient(135deg, #fffef8, #fef9e7); border-left: 5px solid var(--chapman-gold); padding: 25px; margin: 25px 0; border-radius: 0 12px 12px 0; }
        .quote-box blockquote { font-style: italic; color: var(--text-secondary); font-size: 1.05em; line-height: 1.6; }
        .quote-box cite { display: block; margin-top: 12px; color: var(--chapman-blue); font-weight: 600; font-style: normal; }
        .assessment-meta { display: flex; gap: 25px; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(0,32,91,0.1); flex-wrap: wrap; }
        .meta-item { display: flex; align-items: center; gap: 8px; color: var(--text-secondary); }
        .meta-icon { width: 28px; height: 28px; background: var(--chapman-blue); color: var(--white); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 0.85em; }
        .student-info { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 30px; }
        .input-group { display: flex; flex-direction: column; }
        .input-group label { font-weight: 600; margin-bottom: 8px; color: var(--chapman-blue); }
        .input-group input { padding: 14px 16px; border: 2px solid #e1e5eb; border-radius: 10px; font-size: 16px; }
        .input-group input:focus { outline: none; border-color: var(--chapman-blue); box-shadow: 0 0 0 4px rgba(0,32,91,0.08); }
        .instructions-box { background: linear-gradient(135deg, #fffef8, #fef9e7); border: 2px solid var(--chapman-gold); border-radius: 12px; padding: 25px; margin-bottom: 30px; }
        .instructions-box h3 { color: var(--chapman-blue); margin-bottom: 15px; }
        .scale-display { display: flex; justify-content: space-between; margin-top: 15px; padding: 15px; background: var(--blue-light); border-radius: 10px; }
        .scale-item { text-align: center; flex: 1; }
        .scale-number { display: inline-block; width: 36px; height: 36px; line-height: 36px; background: var(--chapman-blue); color: var(--white); border-radius: 50%; font-weight: 700; margin-bottom: 5px; }
        .scale-label { font-size: 0.6em; color: var(--text-secondary); }
        .progress-container { margin-bottom: 25px; }
        .progress-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9em; color: var(--text-secondary); }
        .progress-bar { width: 100%; height: 10px; background: #e8ecf0; border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--chapman-blue), var(--chapman-gold)); width: 0%; transition: width 0.5s ease; }
        .question-container { background: var(--white); border-radius: 14px; border: 2px solid #e8ecf0; padding: 25px; margin-bottom: 18px; transition: all 0.3s ease; }
        .question-container:hover { border-color: var(--chapman-blue); box-shadow: var(--shadow-medium); }
        .question-container.answered { border-color: var(--chapman-gold); background: linear-gradient(135deg, #fffef8, var(--white)); }
        .question-text { font-size: 1.02em; color: var(--text-primary); margin-bottom: 18px; line-height: 1.6; }
        .question-number { color: var(--chapman-blue); font-weight: 700; margin-right: 8px; }
        .likert-scale { display: flex; justify-content: space-between; gap: 6px; }
        .likert-option { flex: 1; text-align: center; }
        .likert-option input[type="radio"] { display: none; }
        .likert-option label { display: flex; flex-direction: column; align-items: center; padding: 12px 6px; border: 2px solid #e8ecf0; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; background: #fafbfc; }
        .likert-option label:hover { border-color: var(--chapman-blue); background: var(--blue-light); }
        .likert-option input[type="radio"]:checked + label { border-color: var(--chapman-blue); background: var(--chapman-blue); color: var(--white); }
        .likert-number { font-size: 1.2em; font-weight: 700; margin-bottom: 2px; }
        .likert-label { font-size: 0.55em; text-transform: uppercase; }
        .controls { text-align: center; margin: 30px 0; }
        .btn { border: none; padding: 16px 40px; font-size: 1.05em; font-weight: 600; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; margin: 8px; display: inline-flex; align-items: center; gap: 10px; }
        .btn-primary { background: linear-gradient(135deg, var(--chapman-blue), var(--blue-medium)); color: var(--white); box-shadow: 0 4px 15px rgba(0,32,91,0.3); }
        .btn-primary:hover:not(:disabled) { transform: translateY(-3px); }
        .btn-secondary { background: linear-gradient(135deg, var(--chapman-gold), #d4b000); color: var(--chapman-blue); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-outline { background: transparent; border: 2px solid var(--chapman-blue); color: var(--chapman-blue); }
        .results { display: none; margin-top: 30px; }
        .results-header { background: linear-gradient(135deg, var(--chapman-blue), var(--blue-medium)); color: var(--white); padding: 40px; text-align: center; border-radius: 16px 16px 0 0; }
        .results-header h2 { font-size: 1.8em; margin-bottom: 10px; }
        .results-header .student-name { font-size: 1.3em; color: var(--chapman-gold); margin-bottom: 8px; }
        .overall-score { background: linear-gradient(135deg, #34495e, #2c3e50); padding: 40px; text-align: center; }
        .score-circle { width: 160px; height: 160px; border-radius: 50%; background: conic-gradient(var(--chapman-gold) var(--pct), rgba(255,255,255,0.2) 0); display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; }
        .score-inner { width: 130px; height: 130px; border-radius: 50%; background: #2c3e50; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--white); }
        .score-inner .score { font-size: 2.8em; font-weight: 700; line-height: 1; }
        .score-inner .label { font-size: 0.85em; opacity: 0.9; }
        .level-name { color: var(--chapman-gold); font-size: 1.4em; font-weight: 700; margin-bottom: 10px; }
        .level-desc { color: rgba(255,255,255,0.85); font-size: 0.95em; max-width: 600px; margin: 0 auto; line-height: 1.6; }
        .dim-scores { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 25px; background: linear-gradient(135deg, #3a5068, #2c3e50); }
        .dim-score-card { background: rgba(255,255,255,0.1); padding: 20px 15px; border-radius: 14px; text-align: center; color: var(--white); }
        .dim-score-card.highest { box-shadow: 0 0 0 3px var(--chapman-gold); }
        .dim-score-card.lowest { border: 2px dashed rgba(255,255,255,0.4); }
        .dim-score-card .icon { font-size: 1.6em; margin-bottom: 6px; }
        .dim-score-card .name { font-size: 0.7em; margin-bottom: 8px; opacity: 0.9; }
        .dim-score-card .score { font-size: 2em; font-weight: 700; }
        .dim-score-card .max { font-size: 0.7em; opacity: 0.7; }
        .results-body { background: var(--blue-light); padding: 35px; border-radius: 0 0 16px 16px; }
        .result-section { background: var(--white); border-radius: 14px; padding: 28px; margin-bottom: 20px; border-left: 5px solid var(--chapman-blue); }
        .result-section.gold-accent { border-left-color: var(--chapman-gold); }
        .result-section h4 { color: var(--chapman-blue); margin-bottom: 18px; }
        .dim-detail { padding: 20px; border-radius: 12px; margin-bottom: 15px; }
        .dim-detail.voice { background: rgba(21,101,192,0.08); border-left: 4px solid var(--voice); }
        .dim-detail.risk { background: rgba(46,125,50,0.08); border-left: 4px solid var(--risk); }
        .dim-detail.mistakes { background: rgba(123,31,162,0.08); border-left: 4px solid var(--mistakes); }
        .dim-detail.inclusion { background: rgba(198,40,40,0.08); border-left: 4px solid var(--inclusion); }
        .dim-detail h5 { margin-bottom: 8px; }
        .dim-detail p { font-size: 0.9em; color: var(--text-secondary); margin-bottom: 10px; }
        .dim-detail ul { list-style: none; padding: 0; }
        .dim-detail li { padding: 5px 0 5px 20px; position: relative; font-size: 0.85em; color: var(--text-secondary); }
        .dim-detail li::before { content: '‚Üí'; position: absolute; left: 0; }
        .zone-indicator { display: flex; justify-content: center; gap: 10px; margin: 20px 0; }
        .zone { padding: 15px 25px; border-radius: 10px; text-align: center; flex: 1; max-width: 200px; }
        .zone.comfort { background: #FFEBEE; border: 2px solid #EF5350; }
        .zone.learning { background: #E8F5E9; border: 2px solid #66BB6A; }
        .zone.anxiety { background: #FFF3E0; border: 2px solid #FFA726; }
        .zone.active { transform: scale(1.05); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .zone .zone-name { font-weight: 700; font-size: 0.9em; margin-bottom: 5px; }
        .zone .zone-desc { font-size: 0.75em; color: var(--text-secondary); }
        .reflection-section { background: linear-gradient(135deg, var(--blue-light), #f0f4fa); border-radius: 14px; padding: 30px; margin-top: 25px; border: 2px solid var(--chapman-blue); }
        .reflection-section h4 { color: var(--chapman-blue); margin-bottom: 20px; text-align: center; }
        .reflection-questions { counter-reset: reflection; }
        .reflection-question { padding: 18px 20px 18px 50px; position: relative; background: var(--white); border-radius: 10px; margin-bottom: 12px; color: var(--text-secondary); }
        .reflection-question::before { counter-increment: reflection; content: counter(reflection); position: absolute; left: 15px; top: 50%; transform: translateY(-50%); width: 26px; height: 26px; background: var(--chapman-blue); color: var(--white); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.85em; font-weight: 700; }
        .footer { text-align: center; padding: 25px; color: var(--text-secondary); font-size: 0.9em; border-top: 1px solid #e8ecf0; margin-top: 30px; }
        @media (max-width: 768px) { .dimensions-grid, .dim-scores { grid-template-columns: repeat(2, 1fr); } .student-info { grid-template-columns: 1fr; } h1 { font-size: 1.8em; } .zone-indicator { flex-direction: column; align-items: center; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="institution">Chapman University</div>
            <div class="college">Argyros College of Business and Economics</div>
            <h1>Psychological Safety Assessment</h1>
            <div class="subtitle">Based on Amy Edmondson's Team Psychological Safety Research</div>
        </div>
        <div class="content">
            <div id="intro-section">
                <div class="intro-section">
                    <h2>üõ°Ô∏è How Safe Is Your Team Environment?</h2>
                    <p><strong>Psychological safety</strong> is the shared belief that the team is safe for interpersonal risk-taking. Google's Project Aristotle found it to be the #1 factor in high-performing teams.</p>
                    <p><strong>Amy Edmondson</strong> of Harvard Business School pioneered this research, showing that psychologically safe teams learn faster, innovate more, and perform better.</p>
                    <div class="dimensions-grid">
                        <div class="dim-preview voice"><div class="icon">üó£Ô∏è</div><div class="name">Speaking Up</div></div>
                        <div class="dim-preview risk"><div class="icon">üéØ</div><div class="name">Risk Taking</div></div>
                        <div class="dim-preview mistakes"><div class="icon">üí°</div><div class="name">Learning from Mistakes</div></div>
                        <div class="dim-preview inclusion"><div class="icon">ü§ù</div><div class="name">Inclusion & Belonging</div></div>
                    </div>
                    <div class="quote-box">
                        <blockquote>"Psychological safety is a belief that one will not be punished or humiliated for speaking up with ideas, questions, concerns, or mistakes."</blockquote>
                        <cite>‚Äî Amy Edmondson, The Fearless Organization (2018)</cite>
                    </div>
                    <div class="assessment-meta">
                        <div class="meta-item"><div class="meta-icon">‚è±</div><span>6-8 minutes</span></div>
                        <div class="meta-item"><div class="meta-icon">üìù</div><span>16 items</span></div>
                        <div class="meta-item"><div class="meta-icon">üõ°Ô∏è</div><span>4 dimensions</span></div>
                    </div>
                </div>
                <div class="student-info">
                    <div class="input-group"><label for="studentName">Your Full Name</label><input type="text" id="studentName" placeholder="Enter your full name"></div>
                    <div class="input-group"><label for="testDate">Assessment Date</label><input type="date" id="testDate"></div>
                </div>
                <div class="instructions-box">
                    <h3>üìå Instructions</h3>
                    <p>Think about a team you're currently part of (work, school, or other). Rate how true each statement is for that team.</p>
                    <div class="scale-display">
                        <div class="scale-item"><div class="scale-number">1</div><div class="scale-label">Strongly Disagree</div></div>
                        <div class="scale-item"><div class="scale-number">2</div><div class="scale-label">Disagree</div></div>
                        <div class="scale-item"><div class="scale-number">3</div><div class="scale-label">Neutral</div></div>
                        <div class="scale-item"><div class="scale-number">4</div><div class="scale-label">Agree</div></div>
                        <div class="scale-item"><div class="scale-number">5</div><div class="scale-label">Strongly Agree</div></div>
                    </div>
                </div>
                <div class="controls"><button class="btn btn-primary" onclick="startAssessment()">Begin Assessment ‚Üí</button></div>
            </div>
            <div id="assessment-section" class="hidden">
                <div class="progress-container">
                    <div class="progress-label"><span>Progress</span><span id="progressText">0 of 16</span></div>
                    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                </div>
                <div id="questions-container"></div>
                <div class="controls"><button class="btn btn-primary" id="submitBtn" onclick="calculateResults()" disabled>Discover My Team's Safety Profile ‚Üí</button></div>
            </div>
            <div id="results" class="results"></div>
            <div id="downloadSection" class="hidden controls">
                <button class="btn btn-secondary" onclick="generatePDF()">üìÑ Download PDF</button>
                <button class="btn btn-outline" onclick="restartAssessment()">Retake</button>
            </div>
        </div>
        <div class="footer">
            <p>Psychological Safety Assessment ‚Ä¢ Based on Amy Edmondson's Research</p>
            <p>Chapman University ‚Ä¢ Argyros College of Business and Economics</p>
            <p style="margin-top: 8px; font-size: 0.85em;">¬© 2024 Professor Chip Monaco ‚Ä¢ MGMT 316</p>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        const questions = {
            voice: [
                { id: 1, text: "On this team, I feel comfortable bringing up problems and tough issues.", dim: "voice" },
                { id: 2, text: "People on this team feel free to express their opinions, even if they differ from others.", dim: "voice" },
                { id: 3, text: "I can share ideas without fear of being criticized or judged.", dim: "voice" },
                { id: 4, text: "Team members actively seek out different perspectives and opinions.", dim: "voice" }
            ],
            risk: [
                { id: 5, text: "It is safe to take a risk on this team.", dim: "risk" },
                { id: 6, text: "Team members are willing to try new approaches, even if they might fail.", dim: "risk" },
                { id: 7, text: "People on this team are encouraged to experiment and innovate.", dim: "risk" },
                { id: 8, text: "I feel comfortable proposing unconventional ideas to the team.", dim: "risk" }
            ],
            mistakes: [
                { id: 9, text: "If I make a mistake on this team, it is not held against me.", dim: "mistakes" },
                { id: 10, text: "Mistakes are treated as learning opportunities on this team.", dim: "mistakes" },
                { id: 11, text: "People on this team openly discuss errors to prevent them in the future.", dim: "mistakes" },
                { id: 12, text: "Team members don't get embarrassed or punished for asking for help.", dim: "mistakes" }
            ],
            inclusion: [
                { id: 13, text: "Members of this team value and respect each other's contributions.", dim: "inclusion" },
                { id: 14, text: "No one on this team would deliberately undermine my efforts.", dim: "inclusion" },
                { id: 15, text: "I feel like I belong and am accepted on this team.", dim: "inclusion" },
                { id: 16, text: "People on this team genuinely care about each other's wellbeing.", dim: "inclusion" }
            ]
        };
        const dimensionData = {
            voice: { 
                name: "Speaking Up", 
                icon: "üó£Ô∏è", 
                color: "#1565C0", 
                description: "The extent to which team members feel comfortable voicing opinions, concerns, and ideas ‚Äî even when they differ from the majority.", 
                profileSummary: "This dimension measures how freely team members can express their thoughts, concerns, and dissenting opinions without fear of negative consequences.",
                highBehaviors: ["Raises concerns early and often", "Shares dissenting views respectfully", "Asks questions without hesitation", "Offers suggestions for improvement"], 
                building: ["Invite quiet voices into discussions", "Thank people for sharing concerns", "Model vulnerability by sharing your own uncertainties", "Create explicit time for questions"],
                swotHigh: "Team has strong voice‚Äîmembers speak up freely, enabling early problem detection",
                swotLow: "Limited voice creates blind spots; issues go unreported until they become crises"
            },
            risk: { 
                name: "Risk Taking", 
                icon: "üéØ", 
                color: "#2E7D32", 
                description: "The degree to which team members feel safe taking interpersonal risks like trying new things, proposing bold ideas, or challenging the status quo.", 
                profileSummary: "This dimension measures willingness to experiment, innovate, and try new approaches even when failure is possible.",
                highBehaviors: ["Proposes innovative solutions", "Volunteers for challenging tasks", "Experiments without fear of failure", "Challenges conventional approaches"], 
                building: ["Celebrate intelligent failures", "Reward effort and learning, not just outcomes", "Share your own failed experiments", "Create low-stakes opportunities to try new things"],
                swotHigh: "Team embraces innovation‚Äîmembers try new approaches and challenge status quo",
                swotLow: "Risk aversion limits innovation; team sticks to safe, proven approaches only"
            },
            mistakes: { 
                name: "Learning from Mistakes", 
                icon: "üí°", 
                color: "#7B1FA2", 
                description: "How the team treats errors and failures ‚Äî as punishable offenses or as valuable learning opportunities.", 
                profileSummary: "This dimension measures whether mistakes are treated as learning opportunities or as failures to be punished or hidden.",
                highBehaviors: ["Openly discusses mistakes", "Conducts blameless post-mortems", "Asks for help without embarrassment", "Views failures as data for improvement"], 
                building: ["Conduct blame-free retrospectives", "Share your own mistakes openly", "Focus on systems, not individuals", "Ask 'What can we learn?' not 'Who's at fault?'"],
                swotHigh: "Team learns rapidly‚Äîmistakes become fuel for continuous improvement",
                swotLow: "Mistakes are hidden; team repeats errors and fails to improve processes"
            },
            inclusion: { 
                name: "Inclusion & Belonging", 
                icon: "ü§ù", 
                color: "#C62828", 
                description: "The sense that all team members are valued, respected, and genuinely belong ‚Äî regardless of their background or role.", 
                profileSummary: "This dimension measures whether all team members feel valued, respected, and that they genuinely belong.",
                highBehaviors: ["Actively includes all team members", "Shows genuine interest in others", "Gives credit generously", "Supports teammates' success"], 
                building: ["Learn about team members as people", "Ensure everyone has a voice in meetings", "Recognize contributions publicly", "Address exclusionary behavior immediately"],
                swotHigh: "Strong belonging‚Äîall members feel valued, driving retention and engagement",
                swotLow: "Exclusion or favoritism damages morale and drives turnover"
            }
        };
        const levels = [
            { min: 64, max: 80, name: "High Psychological Safety", zone: "learning", desc: "Your team has a strong foundation of trust and openness. Team members feel safe to speak up, take risks, and learn from mistakes." },
            { min: 48, max: 63, name: "Moderate Psychological Safety", zone: "learning", desc: "Your team has decent psychological safety but room to grow. Some members may still hold back or feel uncertain about speaking up." },
            { min: 32, max: 47, name: "Limited Psychological Safety", zone: "anxiety", desc: "Your team struggles with psychological safety. Many members likely hold back ideas or concerns due to fear of negative consequences." },
            { min: 16, max: 31, name: "Low Psychological Safety", zone: "comfort", desc: "Your team lacks psychological safety. Members likely stay silent to avoid risk, which limits learning and innovation." }
        ];
        let responses = {};
        let studentName = '';
        let surveyDate = '';
        document.addEventListener('DOMContentLoaded', () => { document.getElementById('testDate').value = new Date().toISOString().split('T')[0]; });
        function startAssessment() {
            studentName = document.getElementById('studentName').value.trim();
            surveyDate = document.getElementById('testDate').value;
            if (!studentName) { alert('Please enter your name.'); return; }
            document.getElementById('intro-section').classList.add('hidden');
            document.getElementById('assessment-section').classList.remove('hidden');
            renderQuestions();
        }
        function renderQuestions() {
            const container = document.getElementById('questions-container');
            const allQuestions = [...questions.voice, ...questions.risk, ...questions.mistakes, ...questions.inclusion].sort(() => Math.random() - 0.5);
            container.innerHTML = allQuestions.map((q, i) => `
                <div class="question-container" id="q-container-${q.id}">
                    <div class="question-text"><span class="question-number">${i+1}.</span> ${q.text}</div>
                    <div class="likert-scale">
                        ${[1,2,3,4,5].map(val => `
                            <div class="likert-option">
                                <input type="radio" name="q${q.id}" id="q${q.id}_${val}" value="${val}" onchange="handleResponse(${q.id}, ${val}, '${q.dim}')">
                                <label for="q${q.id}_${val}"><span class="likert-number">${val}</span><span class="likert-label">${['Strongly Disagree','Disagree','Neutral','Agree','Strongly Agree'][val-1]}</span></label>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }
        function handleResponse(id, value, dim) {
            responses[id] = { value, dim };
            document.getElementById(`q-container-${id}`).classList.add('answered');
            updateProgress();
        }
        function updateProgress() {
            const answered = Object.keys(responses).length;
            document.getElementById('progressFill').style.width = (answered / 16 * 100) + '%';
            document.getElementById('progressText').textContent = `${answered} of 16`;
            document.getElementById('submitBtn').disabled = answered < 16;
        }
        function calculateResults() {
            const scores = { voice: 0, risk: 0, mistakes: 0, inclusion: 0 };
            Object.values(responses).forEach(r => scores[r.dim] += r.value);
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            displayResults(scores, totalScore);
        }
        function displayResults(scores, totalScore) {
            const level = levels.find(l => totalScore >= l.min && totalScore <= l.max) || levels[3];
            const pct = (totalScore / 80) * 100;
            const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const highestDim = sorted[0][0];
            const lowestDim = sorted[3][0];
            
            // Calculate safety level and tracker code
            const safetyLevel = totalScore >= 64 ? 'High' : totalScore >= 48 ? 'Moderate' : totalScore >= 32 ? 'Limited' : 'Low';
            const trackerCode = `PSA-${safetyLevel.charAt(0)}-${totalScore}`;
            
            // Determine overall profile
            const profileDescription = totalScore >= 64 
                ? "Your team demonstrates strong psychological safety. Members feel comfortable speaking up, taking risks, and learning from mistakes."
                : totalScore >= 48 
                ? "Your team has moderate psychological safety with room to grow. Some members may still hesitate to speak up or take risks."
                : totalScore >= 32
                ? "Your team has limited psychological safety. Many members likely hold back ideas and concerns due to fear of consequences."
                : "Your team lacks psychological safety. Members stay silent to avoid risk, severely limiting learning and innovation.";
            
            document.getElementById('results').innerHTML = `
                <div class="results-header"><h2>üõ°Ô∏è Your Team's Psychological Safety Profile</h2><div class="student-name">${studentName}</div><div class="date">Completed: ${new Date(surveyDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</div></div>
                <div class="overall-score">
                    <div class="score-circle" style="--pct: ${pct}%;"><div class="score-inner"><div class="score">${totalScore}</div><div class="label">of 80</div></div></div>
                    <div class="level-name">${level.name}</div>
                    <div class="level-desc">${level.desc}</div>
                    <div class="zone-indicator">
                        <div class="zone comfort ${level.zone === 'comfort' ? 'active' : ''}"><div class="zone-name">üò∞ Comfort Zone</div><div class="zone-desc">Stay silent to avoid risk</div></div>
                        <div class="zone learning ${level.zone === 'learning' ? 'active' : ''}"><div class="zone-name">üöÄ Learning Zone</div><div class="zone-desc">Safe to take risks & grow</div></div>
                        <div class="zone anxiety ${level.zone === 'anxiety' ? 'active' : ''}"><div class="zone-name">üòü Anxiety Zone</div><div class="zone-desc">Uncertain, holding back</div></div>
                    </div>
                </div>
                
                <!-- TRACKER SUMMARY SECTION -->
                <div style="background: linear-gradient(135deg, #1a3a7a 0%, #00205B 100%); color: white; padding: 25px; margin: 0;">
                    <h3 style="color: #C4A000; margin-bottom: 15px; font-size: 1.3em;">üìã Assessment Tracker Summary</h3>
                    <p style="font-size: 0.9em; opacity: 0.9; margin-bottom: 15px;">Copy this information into your Assessment Tracker at the end of the semester.</p>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase; letter-spacing: 1px;">Overall Safety Level</div>
                                <div style="font-size: 1.4em; font-weight: 700; color: ${totalScore >= 48 ? '#4CAF50' : '#F5E6A3'};">${safetyLevel} (${totalScore}/80)</div>
                            </div>
                            <div>
                                <div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase; letter-spacing: 1px;">Current Zone</div>
                                <div style="font-size: 1.4em; font-weight: 700; color: #F5E6A3;">${level.zone === 'learning' ? 'üöÄ Learning Zone' : level.zone === 'anxiety' ? 'üòü Anxiety Zone' : 'üò∞ Comfort Zone'}</div>
                            </div>
                            <div>
                                <div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase; letter-spacing: 1px;">Strongest Dimension</div>
                                <div style="font-size: 1.2em; font-weight: 600;">${dimensionData[highestDim].icon} ${dimensionData[highestDim].name} (${scores[highestDim]}/20)</div>
                            </div>
                            <div>
                                <div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase; letter-spacing: 1px;">Growth Opportunity</div>
                                <div style="font-size: 1.2em; font-weight: 600;">${dimensionData[lowestDim].icon} ${dimensionData[lowestDim].name} (${scores[lowestDim]}/20)</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">Dimension Scores</div>
                        <div style="font-family: monospace; font-size: 1em;">
                            Voice: ${scores.voice}/20 | Risk: ${scores.risk}/20 | Mistakes: ${scores.mistakes}/20 | Inclusion: ${scores.inclusion}/20
                        </div>
                    </div>

                    <div style="background: rgba(196, 160, 0, 0.2); padding: 15px; border-radius: 8px; border-left: 4px solid #C4A000;">
                        <div style="font-size: 0.8em; opacity: 0.8; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">Key Characteristics for SWOT Analysis</div>
                        <div style="font-size: 0.95em; line-height: 1.6;">
                            <strong>Profile:</strong> ${profileDescription}<br>
                            <strong>Strength Area:</strong> ${dimensionData[highestDim].profileSummary}<br>
                            <strong>Growth Area:</strong> ${dimensionData[lowestDim].profileSummary}
                        </div>
                    </div>

                    <div style="margin-top: 15px; padding: 12px; background: rgba(255,255,255,0.1); border-radius: 8px; font-family: monospace; font-size: 0.85em;">
                        <span style="opacity: 0.7;">Tracker Code:</span> <strong style="color: #F5E6A3;">${trackerCode}</strong> 
                        <span style="opacity: 0.7; margin-left: 15px;">|</span>
                        <span style="opacity: 0.7; margin-left: 15px;">Raw:</span> <strong>V${scores.voice}-R${scores.risk}-M${scores.mistakes}-I${scores.inclusion}</strong>
                    </div>
                </div>
                
                <div class="dim-scores">
                    ${['voice', 'risk', 'mistakes', 'inclusion'].map(dim => `
                        <div class="dim-score-card ${dim === highestDim ? 'highest' : ''} ${dim === lowestDim ? 'lowest' : ''}">
                            <div class="icon">${dimensionData[dim].icon}</div>
                            <div class="name">${dimensionData[dim].name}</div>
                            <div class="score">${scores[dim]}</div>
                            <div class="max">of 20</div>
                        </div>
                    `).join('')}
                </div>
                <div class="results-body">
                    <div class="result-section"><h4>üìä Dimension Profile</h4>
                        ${['voice', 'risk', 'mistakes', 'inclusion'].map(dim => `
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 12px;">
                                <span style="width: 150px; font-weight: 600; color: var(--text-secondary); font-size: 0.85em;">${dimensionData[dim].icon} ${dimensionData[dim].name}</span>
                                <div style="flex: 1; height: 26px; background: #e8ecf0; border-radius: 13px; overflow: hidden;">
                                    <div style="height: 100%; width: ${(scores[dim] / 20) * 100}%; background: ${dimensionData[dim].color}; border-radius: 13px; display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; color: white; font-weight: 600; font-size: 0.8em; min-width: 35px;">${scores[dim]}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="result-section gold-accent"><h4>üí™ Team Strength: ${dimensionData[highestDim].name}</h4>
                        <div class="dim-detail ${highestDim}"><h5 style="color: ${dimensionData[highestDim].color};">${dimensionData[highestDim].icon} ${dimensionData[highestDim].name}</h5><p>${dimensionData[highestDim].description}</p><p><strong>Signs of Strength:</strong></p><ul>${dimensionData[highestDim].highBehaviors.map(b => `<li style="color: ${dimensionData[highestDim].color};">${b}</li>`).join('')}</ul></div>
                    </div>
                    <div class="result-section"><h4>üéØ Growth Opportunity: ${dimensionData[lowestDim].name}</h4>
                        <div class="dim-detail ${lowestDim}"><h5 style="color: ${dimensionData[lowestDim].color};">${dimensionData[lowestDim].icon} ${dimensionData[lowestDim].name}</h5><p>${dimensionData[lowestDim].description}</p><p><strong>Building Strategies:</strong></p><ul>${dimensionData[lowestDim].building.map(b => `<li style="color: ${dimensionData[lowestDim].color};">${b}</li>`).join('')}</ul></div>
                    </div>
                    
                    <!-- SWOT Preview Section -->
                    <div style="background: linear-gradient(135deg, var(--blue-light) 0%, #f0f4fa 100%); border-radius: 14px; padding: 25px; margin: 20px 0; border: 2px solid var(--chapman-blue);">
                        <h4 style="color: var(--chapman-blue); margin-bottom: 15px; font-size: 1.2em;">üìä SWOT Analysis Preview (For Assessment Tracker)</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9em; margin-bottom: 15px;">This preview shows how your Psychological Safety profile will contribute to your comprehensive SWOT analysis.</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="background: #E8F5E9; padding: 15px; border-radius: 10px; border-left: 4px solid #2E7D32;">
                                <strong style="color: #2E7D32; font-size: 0.9em;">STRENGTH</strong>
                                <p style="font-size: 0.9em; margin-top: 5px; color: var(--text-secondary);">${dimensionData[highestDim].swotHigh}</p>
                            </div>
                            <div style="background: #FFEBEE; padding: 15px; border-radius: 10px; border-left: 4px solid #C62828;">
                                <strong style="color: #C62828; font-size: 0.9em;">WEAKNESS</strong>
                                <p style="font-size: 0.9em; margin-top: 5px; color: var(--text-secondary);">${dimensionData[lowestDim].swotLow}</p>
                            </div>
                            <div style="background: #E3F2FD; padding: 15px; border-radius: 10px; border-left: 4px solid #1565C0;">
                                <strong style="color: #1565C0; font-size: 0.9em;">OPPORTUNITY</strong>
                                <p style="font-size: 0.9em; margin-top: 5px; color: var(--text-secondary);">Focus on building ${dimensionData[lowestDim].name.toLowerCase()} through: ${dimensionData[lowestDim].building[0]}</p>
                            </div>
                            <div style="background: #FFF3E0; padding: 15px; border-radius: 10px; border-left: 4px solid #E65100;">
                                <strong style="color: #E65100; font-size: 0.9em;">THREAT</strong>
                                <p style="font-size: 0.9em; margin-top: 5px; color: var(--text-secondary);">${totalScore < 48 ? 'Low psychological safety may lead to talent loss, innovation stagnation, and hidden problems' : 'Maintaining high safety requires continuous attention; complacency can erode trust'}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-section gold-accent"><h4>üî¨ Why Psychological Safety Matters</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <div style="padding: 15px; background: rgba(21,101,192,0.08); border-radius: 10px;"><div style="font-weight: 600; color: var(--voice); margin-bottom: 5px;">üìà Google's Finding</div><div style="font-size: 0.85em; color: var(--text-secondary);">PS was #1 factor in high-performing teams (Project Aristotle)</div></div>
                            <div style="padding: 15px; background: rgba(46,125,50,0.08); border-radius: 10px;"><div style="font-weight: 600; color: var(--risk); margin-bottom: 5px;">üí° More Innovation</div><div style="font-size: 0.85em; color: var(--text-secondary);">Safe teams take more creative risks</div></div>
                            <div style="padding: 15px; background: rgba(123,31,162,0.08); border-radius: 10px;"><div style="font-weight: 600; color: var(--mistakes); margin-bottom: 5px;">üìö Faster Learning</div><div style="font-size: 0.85em; color: var(--text-secondary);">Teams learn from mistakes instead of hiding them</div></div>
                            <div style="padding: 15px; background: rgba(198,40,40,0.08); border-radius: 10px;"><div style="font-weight: 600; color: var(--inclusion); margin-bottom: 5px;">ü§ù Better Retention</div><div style="font-size: 0.85em; color: var(--text-secondary);">People stay where they feel valued</div></div>
                        </div>
                    </div>
                    <div class="reflection-section"><h4>ü§î Reflection Questions</h4><div class="reflection-questions"><div class="reflection-question">When was the last time you held back an idea or concern? What stopped you?</div><div class="reflection-question">How does your team respond when someone makes a mistake?</div><div class="reflection-question">Who on your team might not feel safe speaking up? Why?</div><div class="reflection-question">What one action could you take this week to increase psychological safety?</div></div></div>
                </div>
            `;
            document.getElementById('assessment-section').classList.add('hidden');
            document.getElementById('results').style.display = 'block';
            document.getElementById('downloadSection').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            window.psResults = { scores, totalScore, level, highestDim, lowestDim };
        }
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const { scores, totalScore, level, highestDim, lowestDim } = window.psResults;
            doc.setFillColor(0, 32, 91);
            doc.rect(0, 0, 210, 40, 'F');
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            doc.text('CHAPMAN UNIVERSITY', 105, 12, { align: 'center' });
            doc.setFontSize(16);
            doc.text('Psychological Safety Assessment', 105, 25, { align: 'center' });
            doc.setFontSize(9);
            doc.setTextColor(196, 160, 0);
            doc.text("Based on Amy Edmondson's Research", 105, 33, { align: 'center' });
            doc.setFillColor(196, 160, 0);
            doc.rect(0, 40, 210, 2, 'F');
            let y = 52;
            doc.setFontSize(11);
            doc.setTextColor(26, 26, 46);
            doc.text(`Student: ${studentName}`, 20, y);
            doc.text(`Date: ${new Date(surveyDate).toLocaleDateString()}`, 120, y);
            y += 15;
            doc.setFillColor(0, 32, 91);
            doc.roundedRect(20, y, 170, 18, 3, 3, 'F');
            doc.setFontSize(14);
            doc.setTextColor(255, 255, 255);
            doc.text(`${level.name}: ${totalScore}/80`, 105, y + 12, { align: 'center' });
            y += 26;
            doc.setFontSize(10);
            doc.setTextColor(26, 26, 46);
            ['voice', 'risk', 'mistakes', 'inclusion'].forEach(dim => {
                doc.text(`${dimensionData[dim].icon} ${dimensionData[dim].name}: ${scores[dim]}/20`, 25, y);
                y += 7;
            });
            y += 5;
            doc.setFontSize(11);
            doc.setTextColor(0, 32, 91);
            doc.text(`Strongest: ${dimensionData[highestDim].name}`, 20, y); y += 6;
            doc.text(`Growth Area: ${dimensionData[lowestDim].name}`, 20, y);
            doc.setFontSize(8);
            doc.setTextColor(100, 100, 110);
            doc.text('Chapman University ‚Ä¢ Argyros College of Business ‚Ä¢ MGMT 316', 105, 287, { align: 'center' });
            doc.save(`Psychological_Safety_${studentName.replace(/\s+/g, '_')}.pdf`);
        }
        function restartAssessment() {
            responses = {};
            document.getElementById('studentName').value = '';
            document.getElementById('testDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('results').style.display = 'none';
            document.getElementById('assessment-section').classList.add('hidden');
            document.getElementById('downloadSection').classList.add('hidden');
            document.getElementById('intro-section').classList.remove('hidden');
            document.getElementById('progressFill').style.width = '0%';
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
